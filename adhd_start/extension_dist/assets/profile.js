import{r as g,j as e,c as P,R}from"./tailwind.js";const m={firstName:"",lastName:"",title:"",letter:""},j={firstName:"",middleName:"",lastName:"",email:"",street1:"",street2:"",city:"",province:"",postalCode:"",country:"",citizen:!1,pr:!1,otherStatus:!1,school:"",program:"",yearsCompleted:"",expectedCompletion:"",degreeType:"",resumeSummary:"",references:[{...m},{...m},{...m}]};function E(){const[t,c]=g.useState(j),[u,r]=g.useState(""),[i,d]=g.useState("info"),p="userProfile";g.useEffect(()=>{async function s(){try{r("Loading profile…"),d("info"),chrome.storage.sync.get(p,l=>{const o=l[p]||{},f=o.references||[],x=[0,1,2].map(b=>({...m,...f[b]||{}}));c({...j,...o,references:x}),r("")})}catch(l){console.error("Failed to load profile",l),r("Could not load saved profile."),d("error")}}s()},[]);function a(s,l){c(o=>({...o,[s]:l}))}function h(s,l,o){c(f=>{const x=[...f.references],b=x[s]||{...m};return x[s]={...b,[l]:o},{...f,references:x}})}async function N(s){s.preventDefault();try{r("Saving profile…"),d("info");const l={...t};chrome.storage.sync.set({[p]:l},()=>{chrome.runtime.sendMessage({type:"PROFILE_UPDATED",profile:l}),r("Profile saved."),d("success")})}catch(l){console.error("Failed to save profile",l),r("Could not save profile."),d("error")}}async function C(){if(!window.confirm("Are you sure you want to clear your saved profile? This cannot be undone.")){r("Profile not cleared."),d("info");return}try{chrome.storage.sync.remove(p,()=>{chrome.runtime.sendMessage({type:"PROFILE_UPDATED",profile:null}),c(j),r("Saved profile cleared."),d("success")})}catch(l){console.error("Failed to clear profile",l),r("Error clearing profile."),d("error")}}const S=i==="success"?"text-emerald-400":i==="error"?"text-red-400":"text-slate-400";return e.jsx("main",{className:"min-h-screen bg-slate-950 text-slate-50 flex justify-center px-4 py-6",children:e.jsxs("div",{className:"w-full max-w-3xl space-y-4",children:[e.jsxs("header",{className:"space-y-1",children:[e.jsx("h1",{className:"text-xl font-semibold",children:"Profile"}),e.jsx("p",{className:"text-sm text-slate-400",children:"This information stays on your device and is used to auto-fill applications."})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4 space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Basic Information"}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[e.jsx(n,{label:"First name",required:!0,value:t.firstName,onChange:s=>a("firstName",s)}),e.jsx(n,{label:"Middle name (optional)",value:t.middleName,onChange:s=>a("middleName",s)}),e.jsx(n,{label:"Last name",required:!0,value:t.lastName,onChange:s=>a("lastName",s)})]}),e.jsx(n,{label:"Email",required:!0,type:"email",value:t.email,onChange:s=>a("email",s)})]}),e.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4 space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Address"}),e.jsx(n,{label:"Street address 1",required:!0,value:t.street1,onChange:s=>a("street1",s)}),e.jsx(n,{label:"Street address 2 (optional)",value:t.street2,onChange:s=>a("street2",s)}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsx(n,{label:"City",required:!0,value:t.city,onChange:s=>a("city",s)}),e.jsx(n,{label:"Province / State",required:!0,value:t.province,onChange:s=>a("province",s)})]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-2",children:[e.jsx(n,{label:"Postal code",required:!0,value:t.postalCode,onChange:s=>a("postalCode",s)}),e.jsx(n,{label:"Country",required:!0,value:t.country,onChange:s=>a("country",s)})]})]}),e.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4 space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Residency Status"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Check all that apply (Used for eligibility checks)."}),e.jsxs("div",{className:"grid gap-2 md:grid-cols-3",children:[e.jsx(y,{label:"Canadian citizen",checked:t.citizen,onChange:s=>a("citizen",s)}),e.jsx(y,{label:"Canada PR",checked:t.pr,onChange:s=>a("pr",s)}),e.jsx(y,{label:"Other / international",checked:t.otherStatus,onChange:s=>a("otherStatus",s)})]})]}),e.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4 space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Education"}),e.jsx(n,{label:"School",required:!0,value:t.school,onChange:s=>a("school",s)}),e.jsx(n,{label:"Program of study",required:!0,value:t.program,onChange:s=>a("program",s)}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[e.jsx(n,{label:"Years completed",required:!0,type:"number",value:t.yearsCompleted,onChange:s=>a("yearsCompleted",s)}),e.jsx(w,{label:"Degree type",value:t.degreeType,onChange:s=>a("degreeType",s),options:[{value:"",label:"Select…"},{value:"undergrad",label:"Undergraduate / Bachelor"},{value:"masters",label:"Master's"},{value:"phd",label:"PhD"},{value:"college",label:"College / Diploma"},{value:"other",label:"Other"}]}),e.jsx(n,{label:"Expected date of completion",required:!0,type:"date",value:t.expectedCompletion,onChange:s=>a("expectedCompletion",s)})]})]}),e.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4 space-y-3",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Resume"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Summarize your key activities."}),e.jsx(v,{label:"Activity Summary",rows:6,value:t.resumeSummary,onChange:s=>a("resumeSummary",s),placeholder:"E.g. leadership roles, internships, projects, volunteering, awards..."})]}),e.jsxs("section",{className:"rounded-xl border border-slate-800 bg-slate-900/80 p-4 space-y-4",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"References"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Up to 3 references."}),[0,1,2].map(s=>{const l=t.references[s]||m;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-xs font-semibold text-slate-300",children:["Reference ",s+1]}),e.jsxs("div",{className:"grid gap-3 md:grid-cols-3",children:[e.jsx(n,{label:"First name",value:l.firstName,onChange:o=>h(s,"firstName",o)}),e.jsx(n,{label:"Last name",value:l.lastName,onChange:o=>h(s,"lastName",o)}),e.jsx(n,{label:"Title / Relationship",value:l.title,onChange:o=>h(s,"title",o)})]}),e.jsx(v,{label:"Supporting letter / notes / URL",rows:3,value:l.letter,onChange:o=>h(s,"letter",o)})]},s)})]}),e.jsxs("section",{className:"flex flex-wrap items-center gap-3 pt-2",children:[e.jsx("button",{type:"submit",className:"inline-flex items-center justify-center rounded-md bg-blue-500 px-4 py-2 text-[13px] font-semibold text-slate-950 hover:bg-blue-400 transition",children:"Save profile"}),e.jsx("button",{type:"button",onClick:C,className:"inline-flex items-center justify-center rounded-md border border-slate-700 bg-slate-900 px-4 py-2 text-[13px] text-slate-200 hover:bg-slate-800 transition",children:"Clear saved data"}),e.jsx("span",{className:`text-xs ${S}`,"aria-live":"polite",children:u})]})]})]})})}function n({label:t,required:c,type:u="text",value:r,onChange:i}){return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-xs font-medium text-slate-200",children:[t,c&&e.jsx("span",{className:"ml-0.5 text-red-400",children:"*"})]}),e.jsx("input",{type:u,value:r,onChange:d=>i(d.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-[12px] text-slate-100 placeholder:text-slate-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})}function v({label:t,rows:c=3,value:u,onChange:r,placeholder:i}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-slate-200",children:t}),e.jsx("textarea",{rows:c,value:u,placeholder:i,onChange:d=>r(d.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-[12px] text-slate-100 placeholder:text-slate-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})}function y({label:t,checked:c,onChange:u}){return e.jsxs("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[e.jsx("input",{type:"checkbox",checked:c,onChange:r=>u(r.target.checked),className:"h-3.5 w-3.5 rounded border-slate-600 bg-slate-950 text-blue-500 focus:ring-blue-500"}),e.jsx("span",{children:t})]})}function w({label:t,value:c,onChange:u,options:r}){return e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-slate-200",children:t}),e.jsx("select",{value:c,onChange:i=>u(i.target.value),className:"w-full rounded-md border border-slate-700 bg-slate-950 px-2 py-1.5 text-[12px] text-slate-100 focus:outline-none focus:ring-1 focus:ring-blue-500",children:r.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value||"_blank"))})]})}const q=P(document.getElementById("root"));q.render(e.jsx(R.StrictMode,{children:e.jsx(E,{})}));
